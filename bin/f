#!/usr/bin/env bash

shellenv=/tmp/shellenv.fish
bindir=$(dirname $0)
export SCRIPTS_DIR="$(cd "$bindir";cd ..;pwd)"

tee "$shellenv" <<EOF
export PATH="$PATH:/nix/var/nix/profiles/default/bin"

# [n]eovim
function n
  $bindir/n \$argv
end

# [v]vim
function v
  n \$argv
end

function scripts:brew
  $bindir/scripts:brew \$argv
end

function scripts:conf
    cp $SCRIPTS_DIR/rice/aerospace/.aerospace.toml $HOME
    cp -R $SCRIPTS_DIR/rice/sketchybar $HOME/.config/sketchybar
end
EOF

fish -C "source $bindir/../fish/config.fish && source '$shellenv'" $@
